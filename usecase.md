# ユースケース記述

## 前提

- 配信者 = 予約者を想定
    - 異なっていても問題はない
- 予約者は、予約者のGoogleアカウントで、あらかじめシステム帰属のGoogleカレンダーの編集権限をリクエストしておく
- 管理者は、編集権限リクエストを審査・承認しておく
    - 悪用防止のため

## 正常フロー

- 予約者は、Googleカレンダーに配信ホスト予約を登録する
- システムの定期実行モジュールは、5分ごとにGoogleカレンダーをチェックし、現在時刻をもとに配信ホスト予約を検索する
- 現在時刻をまたぐ配信ホスト予約があれば、システム帰属のtwitchアカウントで、予約の配信者twitchアカウントの配信をホストする

## 例外フロー

### 現在時刻において予約なし

- 現在時刻をまたぐ配信ホスト予約がなければ、何もしない

### 現在時刻において予約が複数ある

- 現在時刻をまたぐ配信ホスト予約が複数あれば、1つ選択して正常フローを実行する
    - 「1つ選択」する基準は、当該配信ホスト予約の更新日時が一番若いもの(先着)とする

### 予約の配信者twitchアカウントで配信が行われていない

- 現在時刻において、予約の配信者twitchアカウントで配信が行われていなければ、何もしない

### 配信ホスト上限にかかった

- 配信ホスト上限にかかってホストに失敗したら、何もしない
    - 30分間で2回とか？
